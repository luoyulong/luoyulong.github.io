<p>*&mdash;&ndash;
layout: post
title: &ldquo;R 函数内使用load加载全局变量&rdquo;
date: 2014-07-07 18:55:04 +0800
comments: true</p>

<h2>categories: R 技术积累</h2>

<h1>问题</h1>

<p>之前的代码中把训练的模型存储到文件中，之后调用的时候会通过函数load加载。这次把load的调用包装到一个函数内，结果怎么都load不进来（当前函数内有效，切换到其他函数时加载的全局变量global.model就为空了）。经过研究，反正load把文件内的变量加载到当前函数environment的局部变量里了。</p>

<h1>解决方案</h1>

<p>在调用load之后，把函数内局部变量的值用<code>&lt;&lt;-</code>赋给全局变量。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='r'><span class='line'> load<span class="p">(</span><span class="s">&quot;globalmodels.saved&quot;</span><span class="p">)</span>
</span><span class='line'> global.model <span class="o">&lt;&lt;-</span> global.model
</span></code></pre></td></tr></table></div></figure>

